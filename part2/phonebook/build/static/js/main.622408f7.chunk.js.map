{"version":3,"sources":["components/SearchFilter.js","services/persons.js","components/PersonForm.js","components/Phonebook.js","components/Notification.js","App.js","index.js"],"names":["SearchFilter","newFilter","setNewFilter","value","onChange","event","target","baseUrl","axios","get","then","res","data","newObj","post","id","put","delete","PersonForm","persons","newName","newNumber","setPersons","setNewName","setNewNumber","setConfirmMessage","setErrorMessage","handleNotification","setMessage","message","setTimeout","onSubmit","preventDefault","personObject","name","number","confirmText","map","v","includes","window","confirm","personsService","find","updatedPerson","successMessage","catch","err","errorMessage","newPerson","filter","concat","error","console","log","response","finally","type","Phonebook","toLowerCase","key","onClick","Notification","className","ConfirmNotification","ErrorNotification","App","useState","confirmMessage","useEffect","initialPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.622408f7.chunk.js","sourcesContent":["import React from 'react'\n\nconst SearchFilter = ({newFilter, setNewFilter}) => {\n\n\tconst handleFilterChange = (event) => {\n\t\tsetNewFilter(event.target.value)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<p>filter shown with</p>\n\t\t\t<input value={newFilter} onChange={handleFilterChange}/>\n\t\t</div>\n\t)\n}\n\nexport default SearchFilter\n","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const req = axios.get(baseUrl)\n  return req.then(res => res.data)\n}\n\nconst create = newObj => {\n  const req = axios.post(baseUrl, newObj)\n  return req.then(res => res.data)\n}\n\nconst update = (id, newObj) => {\n  const req = axios.put(`${baseUrl}/${id}`, newObj)\n  return req.then(res => res.data)\n}\n\nconst remove = id => {\n  const req = axios.delete(`${baseUrl}/${id}`)\n  return req\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  remove,\n}\n","import React from 'react'\nimport personsService from '../services/persons'\n\nconst PersonForm = ({persons, newName, newNumber, setPersons, setNewName,\n  setNewNumber, setConfirmMessage, setErrorMessage}) => {\n\n  const handleNameChange = event => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNotification = (setMessage, message) => {\n    setMessage(message)\n    setTimeout(() => {\n      setMessage(null) \n    }, 5000)\n  }\n\n  const addPerson = event => {\n    event.preventDefault()\n\t\tconst personObject = {\n\t\t\tname: newName,\n\t\t\tnumber: newNumber\n\t\t}\n\n      /*if (!formIsValid()) {\n      return\n    }*/\n\n    const confirmText = `${newName} is already added to phonebook, ` + \n        `replace the old number with a new one?`\n\n    if (persons.map(v => v.name).includes(newName) && window.confirm(confirmText)) {\n      personsService\n        .update(persons.find(v => v.name === newName).id, personObject)\n        .then(updatedPerson => {\n          setPersons(persons.map(v => v.id === updatedPerson.id ? updatedPerson : v))\n          const successMessage = `Updated ${personObject.name}'s number to ${personObject.number}`\n          handleNotification(setConfirmMessage, successMessage)\n        })\n        .catch(err => {\n          const name = personObject.name\n          const errorMessage = `Information of ${name} has already been removed from server, creating new information instead`\n          setErrorMessage(errorMessage)\n          setTimeout(() => {\n            setErrorMessage(null) \n          }, 5000)\n\n          personsService\n            .create(personObject) \n            .then(newPerson => {\n              setPersons(persons.filter(v => v.name !== newName).concat(newPerson))\n            })\n            .catch(error => {\n              console.log(error.response.data)     \n            })\n        })\n        .finally(() => {\n          setNewName('')\n          setNewNumber('')\n        })\n\n    } \n    else {\n      personsService\n        .create(personObject) \n        .then(newPerson => {\n          setPersons(persons.concat(newPerson))\n          const successMessage = `Added ${personObject.name}`\n          handleNotification(setConfirmMessage, successMessage)\n        })\n        .catch(error => {\n          handleNotification(setErrorMessage, error.response.data.error)\n        })\n        .finally(() => {\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n\tconst formIsValid = () => {\n\t\tlet valid = true\n\t\tlet alertText = ''\n\n\t\tif (newName === '') {\n\t\t\talertText += 'Name field cannot be empty.\\n'\n\t\t\tvalid = false\n\t\t}\n\t\tif (newNumber === '') {\n\t\t\talertText += 'Number field cannot be empty.\\n'\n\t\t\tvalid = false\n\t\t}\n\n\t\tif (!valid) {\n\t\t\talert(alertText)\n\t\t\treturn false\n\t\t}\n\n\t\treturn true\n\t}\n\n\treturn (\n\t\t<form onSubmit={addPerson}>\n\t\t\t<div>\n\t\t\t\tname: <input value={newName} onChange={handleNameChange}/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tnumber: <input value={newNumber} onChange={handleNumberChange}/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t</div>\n\t\t</form>\n\t)\n}\n\nexport default PersonForm\n","import React from 'react'\nimport personsService from '../services/persons'\n\nconst Phonebook = ({persons, newFilter, setPersons, setErrorMessage}) => {\n  const handleRemovePerson = id => () => {\n    const name = persons.find(v => v.id === id).name\n    if (window.confirm(`Delete ${name}`))\n      personsService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(v => v.id !== id))\n        })\n        .catch(err => {\n          const errorMessage = `Information of ${name} has already been removed from server`\n          setErrorMessage(errorMessage)\n          setTimeout(() => {\n            setErrorMessage(null) \n          }, 5000)\n          setPersons(persons.filter(v => v.id !== id))\n        })\n  }\n\n\tconst filterName = (v) => {\n\t\treturn v.name.toLowerCase().includes(newFilter.toLowerCase())\n\t}\n\n  return (\n    <div>\n      {persons.filter(filterName).map(v => {\n        return (\n          <p key={v.name}>\n            {v.name} {v.number}\n            <span><button onClick={handleRemovePerson(v.id)}>delete</button></span>\n          </p>\n        )\n      })}\n    </div>\n  )\n}\n\nexport default Phonebook\n","import React from 'react'\n\nconst Notification = ({className, message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className={className}> \n      {message}\n    </div>\n  )\n}\n\nconst ConfirmNotification = ({message}) => {\n  return <Notification className='confirm' message={message} />\n}\n\nconst ErrorNotification = ({message}) => {\n  return <Notification className='error' message={message} />\n}\n\nexport {ConfirmNotification, ErrorNotification}\n","import React, { useState, useEffect } from 'react'\nimport SearchFilter from './components/SearchFilter'\nimport PersonForm from './components/PersonForm'\nimport Phonebook from './components/Phonebook'\nimport personsService from './services/persons'\nimport { ConfirmNotification, ErrorNotification } from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ confirmMessage, setConfirmMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  const fetchPersons = () => {\n    personsService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }\n  \n  useEffect(fetchPersons, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ConfirmNotification message={confirmMessage} />\n      <ErrorNotification message={errorMessage} /> \n\t\t\t<SearchFilter\n\t\t\t\tsetNewFilter={setNewFilter}\n\t\t\t\tnewFilter={newFilter} />\n\t\t\t<h2>Add new numbers</h2>\n\t\t\t<PersonForm\n        persons={persons}\n\t\t\t\tnewName={newName}\n        newNumber={newNumber}\n        setPersons={setPersons}\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n        setConfirmMessage={setConfirmMessage}\n        setErrorMessage={setErrorMessage} />\n      <h2>Numbers</h2>\n      <Phonebook\n        persons={persons}\n        newFilter={newFilter}\n        setPersons={setPersons}\n        setErrorMessage={setErrorMessage} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}